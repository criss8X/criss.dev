---
import Badge from "@portfolio/components/badge.astro";
import LinkButton from "@portfolio/components/link.astro";
import Section from "@portfolio/components/section.astro";
import Card from "@/components/card.astro";
import { ExternalLink, Github } from "@/components/icon.astro";
import { assertLocale } from "@/lib/error";
import { getLocaleBySite } from "@/locales/locale";

const lang = assertLocale(Astro.currentLocale);
const { content, ui } = getLocaleBySite("portfolio", lang);

const projects = content.projects;
const { previewBtn, title } = ui.projects;
---

<Section id="projects" title={title} className="max-w-6xl">
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {
      projects.map(({ name, desc, stack, github, preview }) => (
        <Card className="group relative bg-card/50 backdrop-blur border-border/50 hover:bg-card/70 hover:border-purple-400/50 transition-all duration-300 overflow-hidden">
          {/* Shine effect */}
          <div
            class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none project-glow"
            style={{
              background: `linear-gradient(to top, rgba(147, 51, 234, 0.2) 0%, rgba(168, 85, 247, 0.15) 30%, transparent 70%)`,
            }}
          />

          <Card variant="header">
            <Card
              variant="title"
              className="flex items-center justify-between  text-lg relative z-10"
            >
              {name}
            </Card>

            <Card variant="description" className="relative z-10 text-left">
              {desc}
            </Card>
          </Card>

          <Card variant="content" className="relative z-10">
            <div class="flex flex-wrap gap-1">
              {stack.map((label) => (
                <Badge variant="outline">{label}</Badge>
              ))}
            </div>
          </Card>

          <Card variant="footer" className="flex gap-2 mt-auto">
            <LinkButton
              size="sm"
              variant="outline"
              href={github}
              className="flex-1"
              target="_blank"
            >
              <Github class="size-4 mr-1" />
              Github
            </LinkButton>

            {preview && (
              <LinkButton
                size="sm"
                href={preview}
                target="_blank"
                className="flex-1"
              >
                <ExternalLink class="size-4 mr-1" />

                {previewBtn}
              </LinkButton>
            )}
          </Card>
        </Card>
      ))
    }
  </div>
</Section>
